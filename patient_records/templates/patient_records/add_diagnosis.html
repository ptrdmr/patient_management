{% extends 'patient_records/base_form.html' %}
{% load static %}

{% block extra_css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/autocomplete.css' %}">
    <style>
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ced4da;
            border-radius: 4px;
        }
        
        .icd-code-wrapper {
            position: relative;
        }
        
        .autocomplete-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 200px;
            overflow-y: auto;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .autocomplete-item {
            padding: 8px 12px;
            cursor: pointer;
        }
        
        .autocomplete-item:hover {
            background-color: #f5f5f5;
        }
    </style>
{% endblock %}

{% block form_content %}
    <div class="form-group">
        <label for="icd_code">ICD Code *</label>
        <div class="icd-code-wrapper">
            <input type="text" 
                   id="icd_code" 
                   name="icd_code" 
                   required>
            <div class="autocomplete-results" style="display: none;"></div>
        </div>
    </div>

    <div class="form-group">
        <label for="diagnosis">Diagnosis *</label>
        <input type="text" id="diagnosis" name="diagnosis" required>
    </div>

    <div class="form-group">
        <label for="date">Date *</label>
        <input type="date" id="date" name="date" required>
    </div>

    <div class="form-group">
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes" rows="4"></textarea>
    </div>
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script src="{% static 'js/icd-autocomplete.js' %}"></script>
{% endblock %}